profiles {
    apptainer_on {
        apptainer.enabled = true
    }
    conda_on {
        conda.enabled = true
    }
    my_laptop {
        process.executor = 'local'
        conda.enabled = true
    }
    univ_hpc {
        process.executor = 'slurm'
        conda.enabled = true
        process.resourceLimits = [
            memory: 750.GB,
            cpus: 200,
            time: 30.d
        ]
    }
    demo {
        // Primary input (file of input files, one per line)
        params.sample_sheet        = "data/bam/sample_sheet.csv"

    }
}

//process {
    // defaults for all processes
  //  cpus = 2
    //memory = 2.GB
    // allocations for a specific process
    //withName: 'GATK_JOINTGENOTYPING' {
    //    cpus = 8
    //}
//}


// Define params.outdir in your params section
params {
    outdir = 'results'
}

/*
 * Pipeline parameters
 */

params {
    // Primary input (file of input files, one per line)
    sample_sheet        = null
    run_bam_index       = true
}

// Process specific parameters
process {
    withName: 'SAMTOOLS_INDEX' {
        publishDir = [
            path: "${params.outdir}/samtools_index",
            mode: 'symlink',
            saveAs: { filename -> filename.endsWith('.bai') ? filename : null }
        ]
    }
}

// Module management
manifest {
    name = 'crg-bcaortho'
    description = 'pipeline'
    author = 'Dean Mckeown'
    version = '1.0.0'
    nextflowVersion = '24.10.0'
    homePage = 'https://github.com/dmckeow/crg-bcaortho'
}