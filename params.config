/*
 * Default pipeline parameters
 */

params {
    // Whole pipeline
    samplesheet         = 'example_data/samplesheet.csv'
    outdir              = 'results/example'
    runName             = 'example_data'
     
    // Workflow control
    run {
        // Subworkflows (development purposes)
        init_ortho = true
        which_ortho = false

        // SEARCH
        search          = true

        // ORTHOLOGY | CLUSTERING - at least one is required!
        broccoli        = true
        orthofinder     = true
        cluster_dmnd_mcl     = true
        cluster_mmseqs       = true
    }

    // Process specific parameters
        // ORTHOLOGY

        // OrthoFinder
        orthofinder {
            prior_run           = null
            args                = ""
            a_threads           = 2
        }

        // Broccoli
        broccoli {
            args   = ""
        }

        // SEARCH
        search {
            gene_family_info   = "${projectDir}/example_data/genefam.tsv"
            gene_family_name   = "Myosin"
            hmm_dir            = "${projectDir}/example_data/hmms"
        }

        // CLUSTER_DMND_MCL
        cluster {
            mcl {
                inflation       = 1.5
                args            = ""
            }

            dmnd {
                args = "--max-target-seqs 10 --fast --quiet"
            }

            mmseqs_createdb {
                args = ""
            }

            mmseqs_cluster {
                args = ""
                prefix = "cluster"
            }

            createseqfiledb {
                args = "--min-sequences 2"
            }

        }
}


// Process specific parameters

afterParamsLoad {
process {
    withName: 'ORTHOFINDER' {
        ext.args = params.orthofinder.args
        ext.a_threads = params.orthofinder.a_threads
    }

    withName: 'MMSEQS_CLUSTER' {
        ext.prefix = params.cluster.mmseqs_cluster.prefix
        ext.args = params.cluster.mmseqs_cluster.args
    }

    withName: 'MMSEQS_CREATEDB' {
        ext.args = params.cluster.mmseqs_createdb.args
    }

    withName: 'PARSE_MMSEQS_TO_FASTA' {
        ext.createseqfiledb_args = params.cluster.createseqfiledb.args
    }
}
}

